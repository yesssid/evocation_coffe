// =============================================================================
// MAIN — estilos base y layout global (importa variables y componentes)
// =============================================================================
@use "sass:color";  // API de color moderna
@import 'variables';
@import 'components/header';
@import 'components/cards';
@import 'components/menu';
@import 'components/tabs';

/* ------------------------------ Base tipográfica ------------------------------ */
* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  font-family: $font-family-base;
  font-size: $font-size-base;
  font-weight: $font-weight-regular;
  color: $color-texto;
  background: $color-crema;
  line-height: 1.6;
}

/* ---------------------------- Contenedor y secciones --------------------------- */
.container { max-width: $container-max; margin: 0 auto; padding: 0 $space-2; }
.section { padding: $space-5 0; }
.section.alt { background: $color-acento; border-block: 1px solid rgba(0,0,0,.05); }

h1, h2, h3 { margin: 0 0 $space-2 0; line-height: 1.2; }
h1 { font-size: clamp(2rem, 3vw, 3rem); color: $color-cafe; }
h2 { font-size: clamp(1.4rem, 2.2vw, 2rem); color: $color-cafe-oscuro; }

.section__lead { color: color.mix($color-texto, $color-cafe-oscuro, $weight: 40%); }

/* --------------------------------- Grillas ------------------------------------ */
.grid-2 {
  display: grid; grid-template-columns: 1fr 1fr; gap: $space-2;
  @media (max-width: 760px) { grid-template-columns: 1fr; }
}
.grid-3 {
  display: grid; grid-template-columns: 1fr 1fr 1fr; gap: $space-2;
  @media (max-width: 980px) { grid-template-columns: 1fr 1fr; }
  @media (max-width: 640px) { grid-template-columns: 1fr; }
}

/* --------------------------------- Botones ------------------------------------ */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
  padding: .7rem 1rem; border-radius: $radius-md; border: 1px solid transparent;
  text-decoration: none; font-weight: $font-weight-bold; cursor: pointer;
  transition: filter .15s ease, transform .15s ease, box-shadow .15s ease;
  box-shadow: $sombra-suave;

  &:hover { filter: brightness(1.05); transform: translateY(-1px); }
  &:active { transform: translateY(0); box-shadow: none; }
}

@each $nombre, $c in $botones {
  .btn-#{$nombre} {
    background: $c;
    color: if(contrast-color($c) == #000000, $color-texto, $color-blanco);
    border-color: if(color.lightness($c) > 85, rgba($color-texto,.15), transparent);

    &.is-outline { background: transparent; color: $c; border-color: $c; }
  }
}
.btn-primary   { @extend .btn-primario; }
.btn-secondary { @extend .btn-secundario; }
.btn-accent    { @extend .btn-acento; }
.btn-outline   { @extend .btn-claro; @extend .btn-primario; background: transparent; color: $color-cafe; border-color: $color-cafe; }

/* ----------------------------------- Hero ------------------------------------- */
.hero {
  padding: clamp(2rem, 5vw, 5rem) 0;

  .hero__grid {
    display: grid; grid-template-columns: 1.2fr .8fr; align-items: center; gap: $space-3;
    @media (max-width: 900px) { grid-template-columns: 1fr; }
  }

  .hero__copy {
    p { margin: 0 0 $space-2 0; }
    .cta { display: flex; flex-wrap: wrap; gap: $space-2; margin-top: $space-2; }
  }

  .hero__img .img-placeholder {
    height: 320px; display: grid; place-items: center; border-radius: $radius-lg;
    background: linear-gradient(45deg, rgba($color-beige,.7), rgba($color-acento,.9));
    color: color.mix($color-texto, $color-cafe-oscuro, $weight: 50%);
    font-weight: $font-weight-bold; letter-spacing: .06em;
    border: 1px dashed rgba($color-cafe, .35);
  }
}

/* -------------------------------- Formularios --------------------------------- */
input, select, textarea, button { font: inherit; }

.order-form, .contact-form {
  display: grid; gap: $space-2;

  label { display: grid; gap: .4rem; }

  input, select, textarea {
    width: 100%; padding: .8rem 1rem; border-radius: $radius-sm;
    border: 1px solid rgba($color-texto,.18); background: $color-blanco; color: $color-texto;
    box-shadow: inset 0 1px 0 rgba(0,0,0,.02);
    &:focus { outline: 2px solid rgba($color-cafe,.25); border-color: $color-cafe; }
  }

  .order-form__block {
    padding: $space-2; border: 1px solid rgba($color-texto,.12); border-radius: $radius-md;
    background: $color-acento; box-shadow: $sombra-suave;
    legend { padding: 0 $space-1; font-weight: $font-weight-bold; color: $color-cafe-oscuro; }
  }

  .order-form__actions { display: flex; gap: $space-2; flex-wrap: wrap; margin-top: .5rem; }
}

/* ----------------------------------- Mapa ------------------------------------- */
.map-wrapper {
  border-radius: $radius-lg; overflow: hidden; box-shadow: $sombra-media;
  border: 1px solid rgba($color-cafe-oscuro, .08);
  .map { display: block; width: 100%; height: 360px; @media (max-width: 640px){ height: 280px; } }
}

/* ---------------------------- Variantes de promos ------------------------------ */
@each $nivel, $bg in $niveles-promos {
  .promo-#{$nivel} {
    background: $bg;
    color: if(contrast-color($bg) == #000000, $color-texto, $color-blanco);
  }
}

/* -------------------------- Función de contraste texto ------------------------ */
@function contrast-color($c, $threshold: 60) {
  @if (color.lightness($c) > $threshold) { @return #000000; }
  @return #ffffff;
}
